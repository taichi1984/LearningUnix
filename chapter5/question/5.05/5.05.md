# 研究課題5.05  
## 課題内容  
ファイルに情報を追加するときの競合について考えよう。  
本文では、可能なスケジューリングシーケンスの中の１つを選んで説明した。  
これら２つのプロセスの２つの処理で可能なスケジューリングシーケンスはいくつあるか。  
それらのシーケンスの結果はどうなるか、答えなさい。  
  
## 競合を回避する処理１ atomicな処理  
本文でもあったとおりatomicな処理を作るということ。  
あるプロセスの手順aと手順bの間に割り込みが発生すると、処理の内容が壊れてしまう場合、手順aと手順bはワンセットで行われるようにして  
途中で他のプロセスなどが動かないように関数などを作ること。  
これをすれば、手順aと手順bは必ず順番に行われるようにカーネル側が動作してくれるため、割り込みによるファイル破壊などはなくなる。  
  
## 競合を回避する処理2 排他処理  
windowsなどが標準でファイルを開く場合などに行っている方法。  
なにかのプロセスがある特定のファイルを開いていた場合、そのファイルが閉じられるまでに他のユーザーが書き込みをするのを禁止する。  
これで、ファイルの内容を読むことはみんなができるようにし、書くことは最初に開いたプロセスのみが行えるようにできる。  
書き込みを行う際は書き込むためのコピーされた一時ファイルを用意し、そちらで編集を行ったあとに一気に保存を行う。  
これを行うことで、書き込み中にファイルを読み込まれてしまい、中途半端なデータが読み込まれてしまうのを防ぐことができる。  
linuxのカーネルにはこの機能はないため、アプリ側では板処理を行わなければ同時書き込みができてしまうのが注意点になる。  
  
  
