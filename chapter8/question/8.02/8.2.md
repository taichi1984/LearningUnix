# 研究課題8.2
## 課題内容
次のプログラムの出力を予想しなさい

main()
{
    int n;
    
    for(n = 0; n < 10; n++)
    {
        printf("my pid = %d , n = %d\n" , getpid(),n);
        sleep(1);
        if( fork() != 0 ) /* この２行を取り除くとどうなるか*/
            exit(0);
    }
}

コメントがつけられている２行を取り除くと、出力はどのように変わるか、答えなさい。

## 処理の動き

まず最も親のプロセスがループに入り

my pid = [forkを呼び出したプロセスのpid]　, n = 0 

と表示したあとにforkする。
親プロセスはfork()の戻り値が0ではないので終了される。

作り出された子プロセスは戻り値が0のため、exit(0)は実行されずループの一番上に移動する。
forkはint nの変数の状態もコピーしているため、ループは問題なく実行されていく。
ループの頭で

my pid = [forkを呼び出したプロセスのpid]　, n = 1" 

を表示する。

子プロセスがforkをした場合、子プロセスが動かしたさらに子のプロセスのforkの戻り値は0だが、子プロセスのforkの戻り値は0ではないためexitされる。

この調子でn < 10の間繰り返しが行われる。

## 予想される出力
```
my pid = [pid] , n = 0
my pid = [pid1] , n = 1
my pid = [pid2] , n = 2
my pid = [pid3] , n = 3
my pid = [pid4] , n = 4
my pid = [pid5] , n = 5
my pid = [pid6] , n = 6
my pid = [pid7] , n = 7
my pid = [pid8] , n = 8
my pid = [pid9] , n = 9
```

この場合、pidは新しいプロセスのものを呼んでいるので全て違うものになるはずである。

## 指定された２行を消すとどうなるか
### コード
```
main()
{
    int n;
    
    for(n = 0; n < 10; n++)
    {
        printf("my pid = %d , n = %d\n" , getpid(),n);
        sleep(1);
    }
}

```

この場合は当然、親プロセスが特に子プロセスをforkで作ったりはしてないので、
以下のようになる。

```
my pid = [最初のプロセスのpid] , n = 0
my pid = [同じプロセスのpid] , n = 1
my pid = [同じプロセスのpid] , n = 2
my pid = [同じプロセスのpid] , n = 3
my pid = [同じプロセスのpid] , n = 4
my pid = [同じプロセスのpid] , n = 5
my pid = [同じプロセスのpid] , n = 6
my pid = [同じプロセスのpid] , n = 7
my pid = [同じプロセスのpid] , n = 8
my pid = [同じプロセスのpid] , n = 9

```

最初のプロセスと同じプロセスpidが表示され続けるだけである。
プロセスは１つしか起動していないので当然そうなる。




