# 研究課題6.1
## 課題内容
多くのUnixソフトウェアツールは、コマンド行で指定されたファイルから入力を読み出すが、trコマンドはそうではない。
trの目的はなにか。trがコマンド行でファイル名を受け付けないのはなぜかわかるか。
標準入力のみから入力を読み出し、コマンド行で指定されたファイルを使わないUnixツールは他にあるか。
ほとんどのUnixコマンドは/bin、/usr/bin、/usr/local/binディレクトリに格納されている。

## trコマンドについて確認する。
### manページを確認する
```
TR(1)    ユーザーコマンド                               TR(1)

名前
       tr - 文字の変換や削除を行う

書式
       tr [OPTION]... SET1 [SET2]

説明
       標準入力から読み込んだ文字を置換、切り詰め、削除し、標準出力に書き込みます。

--- 以下略 ---
```

manページによると**標準入力**から読み込んだ文字を置換、切り詰め、削除し、**標準出力**に書き込むツールだ。
これは編集して標準出力に書き込むツールと言える。

trの編集の方法はどうやるのだろうか？

### trの編集方法

```
$ cat helloworld 
hello world
$ cat helloworld | tr "ello" "appy"
happy wyrpd
$ cat helloworld | tr "ello" "appy" > happywyrpd
$ ls
happywyrpd  helloworld
$ cat happywyrpd 
happy wyrpd

```

helloworldファイルには"hello world"とかかれたテキストが1行だけある。
trは標準入力から得たものを編集し標準出力に書く。

cat hellworldで標準出力された"hello world"をパイプを使って標準入力から取り込みtrで編集する。 ello を appy に置換する。

その結果、happy wyrpdと標準出力（つまり画面）に表示された。
trは複数文字の編集は出来ず上記の例では e→ aへの置換、l→pへの置換、o→yへの置換を行うのみなので、このような結果になる。

この結果を
cat helloworld | tr "ello" "appy" > happywyrpd
とリダイレクトするとあらたにhappywyrpdというファイルが作られ、編集した結果がそのファイルに書き込まれる。

lsで新しくファイルが作られていることが確認できる。
happywyrpdをcatすると編集した内容がこのファイルに書き込まれていることが確認できる。

オプションで -dを使ったりすると、置換ではなく削除を行ったりなどいろいろな編集が行えるが、今回は主な趣旨ではないと思われるのでtrの説明はここまでにする。


### trの目的はなにか、コマンド行でファイルを受け付けないのはなぜか。
trの目的は置換、切り詰めなどの編集作業だが、標準入力から得たものを標準出力に書き込む仕様になっている。
そのため、パイプやリダイレクトなどを組み合わせると、複数のコマンドを組み合わせて使えるようになっている。
Unix的にはファイル入力は別のコマンドに任せ、trは変換だけに責務を限定する（フィルタ哲学）ということのようだ。
責務の分離のためにこのような仕様になっている。

このような仕様はパイプやリダイレクトと非常に相性がよく、複数のツールを組み合わせていろいろな編集をする上で合理的な作りになっている。

### 標準入力のみから入力を読み出し、コマンド行で指定されたファイルを使わないUnixツールは他にあるか。
fold　--- 長い行を指定幅で強制的に改行して見やすくするフィルタ
col   --- バックスペース合成や制御文字をクリーンなテキストに整形する。
yes   --- 標準出力に指定された文字を無限に出力し続ける

コマンドなどがそれにあたる。

### 標準入力からもコマンド行で指定されたファイルもどちらも指定できるツールはたくさんある。
sedが有名なその手のコマンドである。
標準入力から得たものを正規表現で置換や検索をし、標準出力に結果を出す。

```
$ echo "foo foo baz" | sed 's/foo/bar/g'
bar bar baz
```

このように正規表現で置換を行うことが可能なコマンドである。
このコマンドはオプションなどを指定すれば、指定したファイルに対して置換を行うことも可能であるが、
基本の使い方は標準入力から得たものを、置換などの編集をした上で標準出力に書き出すプログラムである。


実はsedの他にもcatもそのような使い方は可能だし、grep,sort,uniq,head,tailなどたくさんのunixコマンドがそのように使うことができる。
ファイル名を指定して使えるものも標準入力からの入力を受け付けているものはあるのだ。
これはunixのパイプやリダイレクトを便利に使う上で非常に重要な仕様になっている。


