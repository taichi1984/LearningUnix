# プログラミング課題5.28
## 課題内容
端末ドライバのOLCUCビットをトグルし、操作後のビットの状態を報告するuppercase.cというプログラムを書きなさい。

## コード

```

#include <alloca.h>
#include <stdio.h>
#include <stdlib.h>
#include <termio.h>
#include <unistd.h>

int main(void) {
  struct termios info;
  if (tcgetattr(0, &info) == -1) {
    perror("tcgetattr");
    exit(1);
  }

  if (info.c_oflag & OLCUC) {
    info.c_oflag &= ~OLCUC;
  } else {
    info.c_oflag |= OLCUC;
  }

  if (tcsetattr(0, TCSANOW, &info) == -1) {
    perror("tcgetattr");
    exit(1);
  }

  if (info.c_oflag & OLCUC) {
    printf("OLCUC is On\n");
  } else {
    printf("OLCUC is Off\n");
  }
}
```

## 実行結果
```
$ sudo ./uppercase
OLCUL IS ON
$ sudo ./uppercase
OLCUL IS ON
$ sudo ./uppercase
OLCUL IS ON
```

毎回ONになってしまう。
なぜか？

### chatgpt調べによると
現在OLCUCというフラグについてはtermiosではobsolete(非推奨)となっており、そもそも実装されていない可能性が高い。
つまり、tcsetattrでONにしようとしても、無視されてしまう。
最初にフラグが立ってなかったら立てるという作業をしてしまい、infoの中身がONになったままになるので、フラグが立ったままになってしまうが
実際設定は反映されないという状況になる。


