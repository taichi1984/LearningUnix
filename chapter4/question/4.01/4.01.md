# 研究課題4.1
## 課題内容
pwdは、ファイルシステム内におけるカレントディレクトリまでのパスを出力する。
ある意味では、そのディレクトリはツリー内におけるあなたの位置である。
実際にはそのディレクトリは、ディスク上のどこかに格納されたバイト情報のコレクションであり、
その位置はヘッド、トラック、セクタ、バイトまたはシリンダ、ヘッド、セクタ、バイトで指定できる。
カレント作業ディレクトリをこのハードウェア上の位置情報に変換する方法はあるか、説明しなさい。

## カレントディレクトリをハードウェア上の位置情報に変換する方法はあるか
この方法はない。

unix上ではユーザーはデバイスのリソースを使いたい場合、
自分の操作しているデバイス（キーボードやマウス）を通して、カーネルが操作を受け取り、その操作で
ユーザー空間のコマンドやプログラムを操作する。
コマンドやプログラムはユーザーの書いたプログラムや操作に応じてカーネルに依頼をし、各デバイスにアクセスし欲しい情報を取得する。
そこからカーネルは、その依頼を受けて、各デバイスなどを操作し要求された情報を、指定されたデバイス（標準出力であったり、指定されたファイルであったり）に返す。

ユーザーはカーネルが、物理的にディスクのどこにアクセスしたりしているのかを知る必要はなく、知れるようにできていない。
そこはカーネルの担当領域であり、ユーザーは直接見たり、操作することはできない。
ユーザーが見ているのは、実際のディスクではなく、抽象化された論理的なファイルシステムとなる。



## ユーザーはどこまでディスクの内容を追えるのか。
### stat
statではinode番号、デバイス番号まではわかる。

### debugfsやfilefragコマンド
ファイルがどのブロックに割り当てられているか（論理ブロック番号）を調べられる。

### hdparam --fibmap
特定ファイルがディスク上のどの物理ブロックにマップされているかを出力できる（root権限要)

### これ以降
ヘッドやシリンダやセクタの座標までは出てこない。
**現在は、特にHDDではなくSSDが多く使われてきているようになっているので無意味**

## この方式を使う意味は？
物理的なディスクの内部座標（カーネル管理）と、論理的な抽象座標（ユーザー視点）を分離することで、
UNIXはどんなデバイスでも同じようにファイルを扱える仕組みを提供している。

一例として現在は、ディスクデバイスの主流はHDDからSSDに変わりつつあるが、
ユーザーは実際のディスクを抽象化した論理的なディレクトリツリーを理解しておけばよい。
実際のストレージがHDDなのかSSDなのかはユーザーは考慮する必要がない。


## 結論
ユーザーが細かいディスクの物理的な位置や座標を知る方法がない。
それを知る必要がないように、OS（カーネル）はユーザーに対して実際の物理的な座標などを隠蔽し
論理的なディレクトリツリーを提供することで、便利に扱えるようになっている。


