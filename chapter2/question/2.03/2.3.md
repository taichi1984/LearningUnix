# 研究課題2.3      
      
## 課題内容      
ファイルを/dev/ttyにコピーしてcp1をテストしなさい。: cp1 cp1.c /dev/tty。デスティネーションファイルは端末である。      
プログラムは、ディスクファイルにデータを送るときに使うのと全く同じシステムコールを使って端末をオープンし、端末に書き込み、      
端末をクローズする。次に、cp1 /dev/tty file1 を使って、端末からディスクファイルにコピーをしなさい。      
今度は、キーボードが入力ファイルになる。この場合、入力の終了は、Enterキーを押してから、Ctrl+Dを入力して示す。      
      
## 実行結果と動作確認      
```    
bash    
    
$ ./cp1.out cp1.c /dev/tty      
     
    
#include<stdio.h>      
#include<unistd.h>      
#include<fcntl.h>      
#include<stdlib.h>      
      
#define BUFFERSIZE 4096      
#define COPYMODE 0644      
      
void oops(char * ,char *);      
      
int main(int ac , char *av[]){      
      
  int in_fd, out_fd , n_chars;      
  char buf[BUFFERSIZE];      
      
  if(ac != 3){      
    fprintf( stderr, "usage: %s source desitination\n" , *av);      
    exit(1);      
  }      
      
  if( ( in_fd=open(av[1] , O_RDONLY)) == -1)      
      oops("Cannot open " , av[1]);      
  if( ( out_fd=creat( av[2], COPYMODE)) == -1)      
      oops("Cannot creat " , av[2]);      
      
      
  while( (n_chars = read(in_fd , buf, BUFFERSIZE)) > 0 )      
    if ( write(out_fd , buf , n_chars ) != n_chars )      
        oops("Write error to ",av[2]);      
      
  if( n_chars == -1)      
      oops("Read error from ", av[1]);      
      
  if(close(in_fd) == -1 || close(out_fd) == -1)    
      oops("Error closing files" , "");      
}      
      
void oops(char *s1 , char *s2)      
{      
  fprintf(stderr , "Error : %s ", s1);      
  perror(s2);      
  exit(1);      
}      
      
```      
      
上記のように、cp1.cのファイルの中身がターミナルに表示された。      
      
```      
bash    
    
$ ./cp1.out /dev/tty file1      
    
This is Testfile      
      
端末からファイルにコピーをする場合、入力した内容からfile1に任意に書き込むことができるのだろうか？      
unixシステム上では端末もファイルとして扱えるということですか？      
      
taichi84@DESKTOP-LFCUOR7:~/unix_linux_programing/chapter2/sampleProgram$ cat file1      
This is Testfile      
      
端末からファイルにコピーをする場合、入力した内容からfile1に任意に書き込むことができるのだろうか？      
この端末unixシステム上では端末もファイルとして扱えるということですか？      
      
```    
    
  端末 `/dev/tty` をコピー元として `cp1` を実行すると、標準入力としてターミナルからの入力を受け付け、      
入力した文字列がコピー先ファイル（例: `file1`）に保存される動作を確認できた。    
    
## 考察と学び    
- cp1 を使って /dev/tty を入力元・出力先として使用することで、端末もファイル同様に扱えることを確認できた。    
- Unix系システムでは、端末（TTY）もファイルディスクリプタを介してアクセスできるリソースであり、「すべてがファイル」という設計思想が反映されている。    
- キーボードからの入力は /dev/tty を通してプログラムで扱えるため、標準入力と出力を自由にファイルと組み合わせて使用できる。    
